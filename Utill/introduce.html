<!-- introduce.html -->
<div class="introduce-container">
  <div class="images-wrapper">
    <img id="profile-pic" src="image/kangjin.jpg" alt="Profile Picture" class="resize-animation">
    <img id="introduce-self" src="image/introduce.jpg" alt="Introduce Self" class="pop-animation" style="display:none;">
  </div>
  <h1 id="typing-text"></h1>
</div>

<style>
  .introduce-container {
    display: flex;
    flex-direction: column;
    align-items: center; /* 세로 중앙 정렬 */
    margin-top: 50px;
  }

  .images-wrapper {
    display: flex;
    justify-content: center; /* 이미지를 가로 중앙에 배치 */
    gap: 20px; /* 이미지 사이의 간격 */
  }

  .resize-animation,
  .pop-animation {
    width: 150px; /* 이미지의 초기 크기를 설정하세요 */
    height: auto;
    transition: transform 2s;
  }

    .pop-animation {
    width: 150px; /* 두 번째 이미지의 크기도 설정 */
    height: auto;
    animation: fadeInImage 2s forwards; /* 새로 정의한 fadeInImage 애니메이션을 사용 */
  }

  /* fadeInImage 애니메이션을 새로 정의 */
  @keyframes fadeInImage {
    from { opacity: 0; transform: translateX(50px); }
    to { opacity: 1; transform: translateX(0); }
  }

  #profile-pic {
    animation: resizeImage 2s forwards;
  }

  #introduce-self {
    /* 아직 애니메이션을 적용하지 않았습니다. 이는 JavaScript에서 처리됩니다. */
  }

  @keyframes resizeImage {
    from { transform: scale(3); }
    to { transform: scale(1); }
  }

  #typing-text {
    display: inline-block;
    white-space: nowrap;
    overflow: hidden;
    border-right: 3px solid;
    animation: typing 3.5s steps(46, end), blink-caret .75s step-end infinite;
    font-size: 2em;
    margin-top: 20px; /* 타이핑 텍스트의 위치를 조정 */
  }

  @keyframes typing {
    from { width: 0; }
    to { width: 100%; }
  }

  @keyframes blink-caret {
    from, to { border-color: transparent; }
    50% { border-color: black; }
  }
</style>

<script>
  // 타이핑 효과를 위한 함수
  function typeWriter(text, i, callback) {
    if (i < (text.length)) {
      document.querySelector("#typing-text").innerHTML = text.substring(0, i + 1) + '<span aria-hidden="true"></span>';

      // 재귀적으로 다음 글자를 계속 타이핑합니다.
      setTimeout(() => {
        typeWriter(text, i + 1, callback)
      }, 100);
    } else if (callback && typeof callback == 'function') {
      // 모든 글자가 타이핑되면 콜백 함수를 호출합니다.
      setTimeout(callback, 700);
    }
  }

  // 타이핑 효과를 시작하는 함수
  function startTypingEffect() {
    const textToType = "Hello, I'm a progressive developer KangJin Yu";
    typeWriter(textToType, 0, function() {
      console.log("Typing animation completed!");
    });
  }

  // 이미지 애니메이션이 끝나면 두 번째 이미지를 표시하고 타이핑을 시작하는 함수
  document.getElementById('profile-pic').addEventListener('animationend', function() {
    var introduceSelfImg = document.getElementById('introduce-self');
    introduceSelfImg.style.display = 'block'; // 두 번째 이미지를 보여줍니다.
    introduceSelfImg.classList.add('animate__animated', 'animate__fadeInRight'); // animate.css 클래스를 추가합니다.
    startTypingEffect(); // 타이핑 효과를 시작합니다.
  });
document.getElementById('profile-pic').addEventListener('animationend', startTypingEffect);
</script>
